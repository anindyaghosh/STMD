clear all
close all



vidname='2018_05_31_13_48_46';
vidnum=2;

c=load('F:\MrBlack\CONFdronefiles\CollapsedAnalysis18_08_17\vid2.mat');
d=load('F:\MrBlack\CONFdronefiles\CollapsedAnalysis18_08_19_kalman\vid2.mat');

ml=load('F:\MrBlack\CONFdronefiles\dump\gind3121.mat');

a=load(['F:\MrBlack\CONFdronefiles\CONF_AnalysisKalman18_08_19\v2-p' num2str(p) '-v1.mat']);

ssbf=a.ssgt.gtbuttonfill(1:5000);

pa=ml.maxlocs_DARK(1,:,1);
pb=ml.maxlocs_DARK(10,:,1);
plot(1:numel(pa),pa,'b-',...
    1:numel(pb),pb,'r--',...
    a.ssgt

c.best_overall{1}.perf
d.best_overall{1}.perf

refnum=zeros(80,2);
for p=1:80
    a=load(['F:\MrBlack\CONFdronefiles\CONF_AnalysisKalman18_08_19\v2-p' num2str(p) '-v1.mat']);
    b=load(['F:\MrBlack\CONFdronefiles\CONF_Analysis18_08_14\v2-p' num2str(p) '-v1.mat']);
    vid_dir='F:\Drone footage\MJ2 Format\';

    refa=a.successes_DARK(1,:,1,2);
    refb=b.successes_DARK(1,:,1,2);
    
    scor(p)=sum(refa & refb);
    refnum(p,:)=[sum(refa) sum(refb)];
end
plot(1:16000,refa(1:16000),'b-',...
    1:16000,refb(1:16000),'rx',...
    1:16000,a.ssgt.gtbuttonfill(1:16000) == 1,'go')
plot(refnum)



return


vread=VideoReader([vid_dir vidname '.mj2']);
framerate=get(vread,'Framerate');


if(strcmp(vidname,'2018_05_31_13_48_46'))
        segment_time_list=[...
            15 24;...
            25 29;...
            30 34;...
            35 41;...
            50 53;...
            55 70;...
            94 103];
    elseif(strcmp(vidname,'Pursuit1'))
        segment_time_list=[...
            35 37;...
            40 42;...
            47 47;...
            49 50;...
            53 54;...
            61 61;...
            73 77;...
            85 89;...
            97 109;...
            4*60+22 4*60+24;...
            4*60+32 4*60+34;...
            4*60+35 4*60+42;...
            4*60+42 5*60+17];
    elseif(strcmp(vidname,'Pursuit2'))
        segment_time_list=[...
            3 5;...
            6 8;...
            14 20;...
            23 25;...
            26 38;...
            40 44;...
            49 51;...
            55 70;...
            73 77;...
            81 85;...
            89 99;...
            104 116;...
            122 139;...
            140 144;...
            149 154;...
            159 167;...
            172 180;...
            183 185;...
            196 202;...
            210 213;...
            266 268];
    elseif(strcmp(vidname,'Stationary1'))
        segment_time_list=[...
            0 29;...
            36 43;...
            44 47;...
            50 54;...
            56 58;...
            70 84;...
            89 100;...
            103 113;...
            116 120;...
            139 150;...
            151 165;...
            204 217;...
            180+58 4*60+8;...
            4*60+34 4*60+39];
    elseif(strcmp(vidname,'Stationary2'))
        segment_time_list=[
            3 10;...
            63 67;...
            78 84;...
            91 97;...
            102 105;...
            109 112;...
            119 137;...
            139 157;...
            160 163;...
            165 171;...
            175 178];
end
    
segment_time_list(:,2)=segment_time_list(:,2)+0.999;

segment_frame_list=1+floor(segment_time_list*framerate);

asumperf=sum(a.successes_DARK(1,segment_frame_list(1,1):segment_frame_list(1,2),:,:),2);
bsumperf=sum(b.successes_DARK(1,segment_frame_list(1,1):segment_frame_list(1,2),:,:),2);